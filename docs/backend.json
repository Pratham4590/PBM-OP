
{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the user (Firebase UID)." },
        "email": { "type": "string", "description": "The user's email address.", "format": "email" },
        "displayName": { "type": "string", "description": "The user's display name." },
        "role": { "type": "string", "description": "The user's role (Admin, Member, Operator)." },
        "createdAt": { "type": "string", "description": "The timestamp when the user was created.", "format": "date-time" },
        "themePreference": { "type": "string", "description": "The user's preferred theme." }
      },
      "required": ["id", "email", "role", "createdAt"]
    },
    "PaperType": {
      "title": "PaperType",
      "type": "object",
      "description": "Represents the type of paper used in production.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the paper type." },
        "paperName": { "type": "string", "description": "The name of the paper type (e.g., A4, Letter)." },
        "gsm": { "type": "number", "description": "The grammage of the paper (grams per square meter)." },
        "length": { "type": "number", "description": "The length of the paper in centimeters." }
      },
      "required": ["paperName", "gsm", "length"]
    },
    "ItemType": {
      "title": "ItemType",
      "type": "object",
      "description": "Represents the type of item being produced.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the item type." },
        "itemName": { "type": "string", "description": "The name of the item type (e.g., Notebook, Diary)." },
        "shortCode": { "type": "string", "description": "A short code for the item type." }
      },
      "required": ["itemName", "shortCode"]
    },
    "Reel": {
      "title": "Reel",
      "type": "object",
      "description": "Represents an individual paper reel in stock.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the reel." },
        "reelNo": { "type": "string", "description": "The unique number for the reel." },
        "paperTypeId": { "type": "string", "description": "Reference to the PaperType." },
        "length": { "type": "number", "description": "The length of the paper on the reel." },
        "gsm": { "type": "number", "description": "The grammage of the paper." },
        "weight": { "type": "number", "description": "The current weight of the reel." },
        "status": { "type": "string", "description": "The status of the reel.", "enum": ["Available", "In Use", "Finished"] },
        "createdAt": { "type": "string", "description": "The timestamp when the reel was created.", "format": "date-time" },
        "createdBy": { "type": "string", "description": "The UID of the user who created the reel." }
      },
      "required": ["reelNo", "paperTypeId", "length", "gsm", "weight", "status", "createdAt", "createdBy"]
    },
    "Program": {
      "title": "Program",
      "type": "object",
      "description": "Represents a production program for notebooks.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the program." },
        "date": { "type": "string", "description": "The date of the program.", "format": "date-time" },
        "paperTypeId": { "type": "string", "description": "Reference to PaperType." },
        "gsm": { "type": "number", "description": "The grammage of the paper used." },
        "length": { "type": "number", "description": "The length of the paper used." },
        "cutoff": { "type": "number", "description": "The cutoff length for the program." },
        "itemTypeId": { "type": "string", "description": "Reference to ItemType." },
        "notebookPages": { "type": "number", "description": "The number of pages in the notebook." },
        "coverIndex": { "type": "number", "description": "The number of cover and index pages." },
        "ups": { "type": "number", "description": "The number of units per sheet." },
        "piecesPerBundle": { "type": "number", "description": "The number of pieces per bundle." },
        "bundlesRequired": { "type": "number", "description": "The number of bundles required." },
        "brand": { "type": "string", "description": "The brand of the notebook." },
        "reamWeight": { "type": "number", "description": "Calculated ream weight." },
        "totalSheetsRequired": { "type": "number", "description": "Calculated total sheets required." },
        "counting": { "type": "number", "description": "Calculated sheets per notebook." }
      },
      "required": ["date", "paperTypeId", "gsm", "length", "cutoff", "itemTypeId", "notebookPages", "coverIndex", "ups", "piecesPerBundle", "bundlesRequired", "brand"]
    },
    "RulingEntry": {
        "title": "Ruling Entry",
        "type": "object",
        "description": "Represents a single ruling action within a larger ruling document.",
        "properties": {
            "itemTypeId": { "type": "string", "description": "Reference to ItemType." },
            "sheetsRuled": { "type": "number", "description": "The number of sheets ruled for this specific entry." },
            "cutoff": { "type": "number", "description": "The cutoff used for this ruling entry." },
            "theoreticalSheets": { "type": "number", "description": "Calculated theoretical sheets for this entry." },
            "difference": { "type": "number", "description": "Calculated difference for this entry." },
            "programId": { "type": "string", "description": "Optional reference to the Program." },
            "status": { "type": "string", "enum": ["In Progress", "Half Finished", "Finished"] }
        },
        "required": ["itemTypeId", "sheetsRuled", "cutoff", "theoreticalSheets", "difference", "status"]
    },
    "Ruling": {
      "title": "Ruling",
      "type": "object",
      "description": "Represents a ruling event for a reel, which can contain multiple individual ruling actions.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the ruling event." },
        "date": { "type": "string", "description": "The date of the ruling event.", "format": "date-time" },
        "reelId": { "type": "string", "description": "Reference to the Reel." },
        "reelNo": { "type": "string", "description": "Denormalized reel number for display." },
        "paperTypeId": { "type": "string", "description": "Denormalized reference to PaperType." },
        "startWeight": { "type": "number", "description": "The weight of the reel before ruling." },
        "endWeight": { "type": "number", "description": "The weight of the reel after ruling." },
        "rulingEntries": {
            "type": "array",
            "description": "An array of individual ruling actions performed on the reel.",
            "items": { "$ref": "#/entities/RulingEntry" }
        },
        "totalSheetsRuled": { "type": "number", "description": "The sum of all sheets ruled in the entries." },
        "createdBy": { "type": "string", "description": "The UID of the user who created the ruling." }
      },
      "required": ["date", "reelId", "reelNo", "paperTypeId", "startWeight", "endWeight", "rulingEntries", "totalSheetsRuled", "createdBy"]
    },
    "Stock": {
      "title": "Stock",
      "type": "object",
      "description": "Represents aggregated stock for a specific paper type.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the stock item, typically the same as paperTypeId." },
        "date": { "type": "string", "description": "The date the stock was last updated.", "format": "date-time" },
        "paperTypeId": { "type": "string", "description": "Reference to the PaperType." },
        "length": { "type": "number", "description": "The length of the paper in cm." },
        "gsm": { "type": "number", "description": "The grammage of the paper." },
        "totalWeight": { "type": "number", "description": "The total weight of all reels of this type." },
        "numberOfReels": { "type": "number", "description": "The total number of reels of this type." }
      },
      "required": ["paperTypeId", "length", "gsm", "totalWeight", "numberOfReels", "date"]
    }
  },
  "auth": {
    "providers": ["password", "google.com"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "User profile information."
    },
    "/paperTypes/{paperTypeId}": {
      "schema": { "$ref": "#/entities/PaperType" },
      "description": "Master data for paper types."
    },
    "/itemTypes/{itemTypeId}": {
      "schema": { "$ref": "#/entities/ItemType" },
      "description": "Master data for item types."
    },
    "/reels/{reelId}": {
      "schema": { "$ref": "#/entities/Reel" },
      "description": "Individual reel stock information."
    },
    "/programs/{programId}": {
      "schema": { "$ref": "#/entities/Program" },
      "description": "Production program definitions."
    },
    "/rulings/{rulingId}": {
      "schema": { "$ref": "#/entities/Ruling" },
      "description": "Ruling entries for each reel."
    },
    "/stock/{stockId}": {
      "schema": { "$ref": "#/entities/Stock" },
      "description": "Aggregated stock levels for each paper type."
    }
  }
}
